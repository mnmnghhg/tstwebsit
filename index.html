<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Awesome Group Word Guess Game</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      color: #eee;
      margin: 0; padding: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding-top: 50px;
      user-select: none;
    }
    #container {
      background: #152f44;
      max-width: 480px;
      width: 100%;
      border-radius: 16px;
      box-shadow:
        0 10px 30px rgba(0,0,0,0.6),
        inset 0 0 10px rgba(255,255,255,0.05);
      padding: 35px 30px 45px;
      box-sizing: border-box;
      text-align: center;
      position: relative;
    }
    h2 {
      margin-top: 0;
      font-weight: 600;
      color: #e0e8f0;
      text-shadow: 0 1px 3px #0007;
      user-select: text;
    }
    input#nameInput {
      width: 65%;
      font-size: 18px;
      padding: 12px 15px;
      border-radius: 10px;
      border: 2px solid #3a7bd5;
      background: #1f365f;
      color: #dce6f1;
      outline: none;
      transition: border-color 0.35s ease, box-shadow 0.35s ease;
      box-shadow: inset 0 0 8px #0f253f;
    }
    input#nameInput::placeholder {
      color: #88aaffaa;
      font-weight: 400;
    }
    input#nameInput:focus {
      border-color: #58a6ff;
      box-shadow: 0 0 10px #58a6ff;
    }
    button {
      background: linear-gradient(145deg, #4a90e2, #357abd);
      color: #f0f7ff;
      border: none;
      border-radius: 12px;
      padding: 14px 28px;
      font-size: 18px;
      cursor: pointer;
      margin-left: 14px;
      font-weight: 600;
      box-shadow:
        0 5px 20px rgba(53,122,189,0.6);
      transition:
        background-color 0.3s ease,
        box-shadow 0.3s ease,
        transform 0.2s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      user-select: none;
    }
    button:hover:not(:disabled) {
      background: linear-gradient(145deg, #3674cd, #245a9e);
      box-shadow:
        0 8px 30px rgba(36,90,158,0.85);
      transform: translateY(-3px);
    }
    button:active:not(:disabled) {
      transform: translateY(-1px);
      box-shadow:
        0 4px 15px rgba(36,90,158,0.6);
    }
    button:disabled {
      background: #3a3f4a;
      cursor: not-allowed;
      box-shadow: none;
      color: #7a7f8b;
    }
    #playerList {
      margin-top: 18px;
      max-height: 140px;
      overflow-y: auto;
      border: 2px solid #2f456b;
      padding: 14px 16px;
      text-align: left;
      border-radius: 14px;
      background: #1b2b47;
      font-size: 16px;
      color: #bcd0ff;
      user-select: text;
    }
    #playerList div {
      margin-bottom: 10px;
      color: #bcd0ffcc;
    }
    #wordWrapper {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 14px;
      margin: 28px 0 20px;
      flex-wrap: wrap;
    }
    #wordContainer {
      font-size: 36px;
      letter-spacing: 14px;
      font-weight: 700;
      min-width: 240px;
      color: #a0c8ff;
      text-shadow: 0 1px 3px #122a4a;
      user-select: none;
    }
    input.letter {
      width: 48px;
      font-size: 36px;
      text-align: center;
      border: 3px solid #5a84e8;
      border-radius: 10px;
      font-weight: 700;
      color: #c3d9ff;
      background: #2c446d;
      transition: border-color 0.35s ease, box-shadow 0.35s ease;
      user-select: text;
    }
    input.letter:focus {
      border-color: #aacdff;
      outline: none;
      box-shadow: 0 0 12px #aacdffcc;
      background: #3a558f;
      color: #e1eaff;
    }
    #message {
      font-weight: 600;
      min-height: 30px;
      margin-top: 18px;
      user-select: none;
    }
    #message[style*="color: red"] {
      text-shadow: 0 0 6px #ff5b5baa;
    }
    #message[style*="color: green"] {
      text-shadow: 0 0 6px #87ff83aa;
    }
    #fullWordDisplay {
      margin-top: 12px;
      font-weight: 600;
      color: #c3d9ff;
      min-height: 28px;
      user-select: none;
      text-shadow: 0 0 4px #80aaffbb;
    }
    #scoreScreen div {
      font-size: 22px;
      margin-bottom: 14px;
      color: #b6c6eb;
      text-shadow: 0 1px 2px #1b2a4a;
      user-select: text;
    }
    #playerWordsList {
      margin-top: 10px;
      text-align: center;
    }
    #playerWordsList button {
      background: #265ecf;
      font-size: 14px;
      padding: 6px 14px;
      margin: 3px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(38, 94, 207, 0.8);
      transition: background-color 0.3s ease;
    }
    #playerWordsList button:hover {
      background: #1a41a0;
    }
    /* Scrollbar for player list */
    #playerList::-webkit-scrollbar {
      width: 8px;
    }
    #playerList::-webkit-scrollbar-thumb {
      background: #5a84e8cc;
      border-radius: 4px;
    }
    #startScreen p {
      color: #7899d4aa;
      font-size: 14px;
      user-select: none;
      margin-top: 10px;
    }
    /* Icon style */
    .icon {
      display: inline-block;
      width: 20px;
      height: 20px;
      stroke-width: 2;
      stroke: currentColor;
      fill: none;
    }
  </style>
</head>
<body>

<div id="container">

  <div id="startScreen">
    <h2>Enter Player Names (2-7 players)</h2>
    <input type="text" id="nameInput" placeholder="Player name" autocomplete="off" />
    <button onclick="addPlayer()">
      Add Player
      <svg class="icon" viewBox="0 0 24 24" >
        <path d="M12 5v14M5 12h14" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
    <div id="playerList"></div>
    <button onclick="startGame()" style="margin-top: 15px;">
      Start Game
      <svg class="icon" viewBox="0 0 24 24" >
        <path d="M5 4v16l15-8z" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
    <p><small>Enter at least 2 players to start</small></p>
  </div>

  <div id="gameScreen" style="display:none;">
    <h2 id="greeting"></h2>
    <div id="wordWrapper">
      <div id="wordContainer" class="word"></div>
      <button id="showWordBtn" onclick="showFullWord()" disabled>
        Show Word
        <svg class="icon" viewBox="0 0 24 24" >
          <circle cx="12" cy="12" r="10" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M12 16v-4" stroke-linecap="round" stroke-linejoin="round"/>
          <circle cx="12" cy="8" r="1" fill="currentColor"/>
        </svg>
      </button>
    </div>
    <div id="fullWordDisplay"></div>
    <button onclick="checkAnswer()">
      Check Answer
      <svg class="icon" viewBox="0 0 24 24" >
        <path d="M5 13l4 4L19 7" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
    <div id="message"></div>
    <button onclick="nextWord()" style="margin-top:12px;">
      Next Word
      <svg class="icon" viewBox="0 0 24 24" >
        <path d="M9 6l6 6-6 6" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
    <div id="playerWordsList"></div>
  </div>

  <div id="scoreScreen" style="display:none;">
    <h2>Game Over! Scores:</h2>
    <div id="scores"></div>
    <button onclick="restartGame()" style="margin-top: 20px;">
      Play Again
      <svg class="icon" viewBox="0 0 24 24" >
        <path d="M21 12a9 9 0 11-6.219-8.361" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M21 3v9h-9" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
  </div>

</div>

<script>
  const allWords = [
    "apple", "house", "green", "table", "chair", "plant", "bread", "clock", "phone", "water",
    "light", "glass", "mouse", "river", "field", "heart", "stone", "grass", "black", "cloud"
  ];

  let players = [];
  let currentPlayerIndex = 0;
  let currentWordIndex = 0;
  let wordsPerPlayer = 6;
  let playerWords = {};
  let missingIndexes = [];
  let scores = {};
  let attemptCount = 0;

  const startScreen = document.getElementById('startScreen');
  const gameScreen = document.getElementById('gameScreen');
  const scoreScreen = document.getElementById('scoreScreen');
  const nameInput = document.getElementById('nameInput');
  const playerList = document.getElementById('playerList');
  const greeting = document.getElementById('greeting');
  const wordContainer = document.getElementById('wordContainer');
  const message = document.getElementById('message');
  const scoresDiv = document.getElementById('scores');
  const fullWordDisplay = document.getElementById('fullWordDisplay');
  const showWordBtn = document.getElementById('showWordBtn');
  const playerWordsList = document.getElementById('playerWordsList');

  // Add a player to the list
  function addPlayer() {
    let name = nameInput.value.trim();
    if (!name) return alert("Please enter a valid name.");
    if (players.includes(name)) return alert("Player already added.");
    if (players.length >= 7) return alert("Maximum 7 players allowed.");
    players.push(name);
    nameInput.value = "";
    updatePlayerList();
  }

  // Update player list display
  function updatePlayerList() {
    playerList.innerHTML = "";
    players.forEach((p, i) => {
      playerList.innerHTML += `<div>${i + 1}. ${p}</div>`;
    });
  }

  // Start the game
  function startGame() {
    if (players.length < 2) {
      alert("Add at least 2 players to start.");
      return;
    }
    // Assign words for each player uniquely
    playerWords = {};
    scores = {};
    for (const p of players) {
      playerWords[p] = getRandomWords(wordsPerPlayer);
      scores[p] = 0;
    }
    currentPlayerIndex = 0;
    currentWordIndex = 0;
    attemptCount = 0;
    showPlayerWord();
    updatePlayerWordsButtons();
    startScreen.style.display = "none";
    scoreScreen.style.display = "none";
    gameScreen.style.display = "block";
    message.textContent = "";
    fullWordDisplay.textContent = "";
    showWordBtn.disabled = false;
  }

  // Get unique random words from allWords
  function getRandomWords(count) {
    let shuffled = [...allWords].sort(() => 0.5 - Math.random());
    return shuffled.slice(0, count);
  }

  // Show the current player's word with 2 letters missing
  function showPlayerWord() {
    const player = players[currentPlayerIndex];
    greeting.textContent = `Player: ${player} (Word ${currentWordIndex + 1} of ${wordsPerPlayer})`;
    const word = playerWords[player][currentWordIndex];
    missingIndexes = getTwoRandomIndexes(word.length);
    renderWord(word, missingIndexes);
    message.textContent = "";
    fullWordDisplay.textContent = "";
    showWordBtn.disabled = false;
    attemptCount = 0;
    updatePlayerWordsButtons();
  }

  // Render the word with missing letters as input boxes
  function renderWord(word, missingIdx) {
    wordContainer.innerHTML = "";
    for (let i = 0; i < word.length; i++) {
      if (missingIdx.includes(i)) {
        let input = document.createElement("input");
        input.type = "text";
        input.maxLength = 1;
        input.classList.add("letter");
        input.id = "input" + i;
        input.autocomplete = "off";
        input.oninput = () => {
          input.value = input.value.toLowerCase();
          if (input.value.length > 1) input.value = input.value.charAt(0);
          if (!/[a-z]/.test(input.value)) {
            input.value = "";
            message.style.color = "red";
            message.textContent = "Please enter a valid letter (a-z).";
          } else {
            message.textContent = "";
            const currentIdxIndex = missingIndexes.indexOf(i);
            if (currentIdxIndex < missingIndexes.length - 1 && input.value) {
              const nextIdx = missingIndexes[currentIdxIndex + 1];
              const nextInput = document.getElementById("input" + nextIdx);
              if (nextInput) nextInput.focus();
            }
          }
        };
        wordContainer.appendChild(input);
      } else {
        let span = document.createElement("span");
        span.textContent = word[i];
        wordContainer.appendChild(span);
      }
    }
    // Focus on the first input
    const firstInput = document.getElementById("input" + missingIdx[0]);
    if (firstInput) firstInput.focus();
  }

  // Get two unique random indexes for missing letters
  function getTwoRandomIndexes(length) {
    let idxs = [];
    while (idxs.length < 2) {
      let r = Math.floor(Math.random() * length);
      if (!idxs.includes(r)) idxs.push(r);
    }
    return idxs.sort((a, b) => a - b); // Sort for consistent focus order
  }

  // Check the answer entered by user
  function checkAnswer() {
    const player = players[currentPlayerIndex];
    const word = playerWords[player][currentWordIndex];
    let userAnswer = word.split("");
    let allFilled = true;
    missingIndexes.forEach(i => {
      const input = document.getElementById("input" + i);
      if (!input.value) allFilled = false;
      userAnswer[i] = input.value.toLowerCase();
    });
    if (!allFilled) {
      message.style.color = "red";
      message.textContent = "Please fill in all missing letters!";
      return;
    }
    if (userAnswer.join("") === word) {
      message.style.color = "lime";
      message.textContent = "Correct! Well done.";
      scores[player]++;
      showWordBtn.disabled = true;
    } else {
      attemptCount++;
      if (attemptCount >= 2) {
        message.style.color = "red";
        message.textContent = `Wrong! The word was "${word}". Moving on.`;
        showWordBtn.disabled = true;
      } else {
        message.style.color = "orange";
        message.textContent = "Incorrect, try again!";
      }
    }
  }

  // Show the full word
  function showFullWord() {
    const player = players[currentPlayerIndex];
    const word = playerWords[player][currentWordIndex];
    fullWordDisplay.textContent = `The word is: ${word}`;
    showWordBtn.disabled = true;
    message.style.color = "orange";
    message.textContent = "Word revealed. No points awarded.";
  }

  // Go to next word or player or end
  function nextWord() {
    currentWordIndex++;
    if (currentWordIndex >= wordsPerPlayer) {
      currentPlayerIndex++;
      currentWordIndex = 0;
      if (currentPlayerIndex >= players.length) {
        showScoreScreen();
        return;
      }
    }
    showPlayerWord();
  }

  // Show score screen
  function showScoreScreen() {
    startScreen.style.display = "none";
    gameScreen.style.display = "none";
    scoreScreen.style.display = "block";
    scoresDiv.innerHTML = "";
    for (const player of players) {
      scoresDiv.innerHTML += `<div>${player}: ${scores[player]} points</div>`;
    }
  }

  // Restart the game
  function restartGame() {
    players = [];
    currentPlayerIndex = 0;
    currentWordIndex = 0;
    playerWords = {};
    scores = {};
    startScreen.style.display = "block";
    gameScreen.style.display = "none";
    scoreScreen.style.display = "none";
    playerList.innerHTML = "";
    nameInput.value = "";
    message.textContent = "";
    fullWordDisplay.textContent = "";
  }

  // Update player words buttons
  function updatePlayerWordsButtons() {
    playerWordsList.innerHTML = "";
    const player = players[currentPlayerIndex];
    playerWords[player].forEach((word, index) => {
      const btn = document.createElement("button");
      btn.textContent = index < currentWordIndex ? word : `Word ${index + 1}`;
      if (index >= currentWordIndex) btn.disabled = true;
      playerWordsList.appendChild(btn);
    });
  }
</script>
</body>
</html>
